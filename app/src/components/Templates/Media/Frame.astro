---
import ICONS from '@Assets/Icons.astro';

interface AlbumViewData {
  title: string;
  description: string;
  shareKey?: string;
  albumSlug: string;
  categoryBadge?: string;
  dateBadge?: string;
  initialThumb?: {
    src?: string;
    width?: number;
    height?: number;
    alt?: string;
    full?: string;
  };
}

interface Props {
  album: AlbumViewData;
  wrapperClass?: string;
  frameClass?: string;
  imageClass?: string;
  isLightbox?: boolean;
  autoplay?: boolean;
  random?: boolean;
  interval?: number;
}

const {
  album,
  wrapperClass,
  frameClass,
  imageClass,
  isLightbox = false,
  autoplay = true,
  random = true,
  interval = 8500,
} = Astro.props as Props;

---
<div
  class:list={[
    'media-wrapper media-wrapper--controls',
    isLightbox ? 'media-wrapper--lightbox' : null,
    wrapperClass,
  ]}
  data-lightbox={isLightbox ? 'true' : undefined}
>
  <div
    class:list={['media-frame', frameClass]}
    data-slug={album.albumSlug}
    data-autoplay={autoplay ? 'true' : 'false'}
    data-interval={String(interval)}
    data-random={random ? 'true' : 'false'}
    data-share-key={album.shareKey}
    role="button"
    tabindex="0"
    aria-label="Open artwork in lightbox"
  >
    <img
      src={album.initialThumb?.src ?? ''}
      width={album.initialThumb?.width}
      height={album.initialThumb?.height}
      alt={album.initialThumb?.alt ?? ''}
      class:list={['media-image', imageClass]}
      loading="eager"
      decoding="async"
      data-initial-full={album.initialThumb?.full ?? undefined}
    />
  </div>

  <div class="card__overlay card__overlay--foot card__overlay--hover">
    <div class="card__overlay-item">
      <div class="media-progress" aria-hidden="true"></div>
    </div>
    <div class="card__overlay-item">
      <div class="controls media-controls controls--center">
        <button class="control control--button control--circle control--media media-prev" aria-label="Previous" type="button">❮</button>
        <button class="control control--button control--circle control--media media-pause" aria-label="Pause autoplay" type="button">
          <ICONS class="media-icon media-icon--small" kind="pause" />
        </button>
        <button class="control control--button control--circle control--media media-play" aria-label="Start autoplay" type="button">
          <ICONS class="media-icon media-icon--small" kind="play" />
        </button>
        <button class="control control--button control--circle control--media media-next" aria-label="Next" type="button">❯</button>
      </div>

      <div class="controls media-controls controls--end">
        <button class="control control--button control--circle control--media media-fullscreen" aria-label="Open Lightbox" type="button">
          <ICONS class="media-icon media-icon--small" kind="fullscreen" />
        </button>
      </div>
    </div>

  </div>

  <div class="card__overlay card__overlay--head card__overlay--hover">
    <div class="card__overlay-item">
      
    {album.title ? (
      <h2>
        {album.title.includes('SFW') ? `Artworks: ${album.title}` : album.title}
      </h2>
    ) : null}

    {(album.categoryBadge || album.dateBadge) && (
      <div class="card__badges controls controls--end">
        <span class="control control--badge">
          {album.categoryBadge ? album.categoryBadge : album.dateBadge}
        </span>
      </div>
    )}
  </div>
  {album.description ? (
    <div class="card__overlay-item">
      <p>{album.description}</p>
    </div>
  ) : null}
</div>
</div>

      






