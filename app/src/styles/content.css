/* ============================================ */
/* ======== CONTENT: COMPONENTS & ELEMENTS ==== */
/* ====== Depends on: tokens, site, typography ====== */
/* ============================================ */
:root {
  --card-gap:                       var(--space-s);
  --card-gap--small:                var(--space-xs);
  --card-padding:                   clamp(var(--space-s),  calc(var(--space-s) + 2.25vw),  var(--space-xl));
  --card-radius:                    var(--radius-l);
  --card-radius--inner:             var(--radius-m);
  --card-border:                    hidden;

  --card-backdrop:                  var(--fx-blur-xl) var(--fx-contrast) hue-rotate(-5deg);
  --card-background:                var(--color-accent-dark--ghosty);
  --card-shadow:                    var(--fx-shadow--elevated), var(--fx-shadow-inset--strong);
  --card-transition:                var(--transition-state--slow);
  --card-transform--fx:             var(--transform-grow);
  --card-filter--fx:                var(--fx-bright) var(--fx-saturate);

  --card-list-gap:                  var(--space-s);
  --card-list-padding:              var(--space-s);

  --card-list-bg:                   var(--color-accent-dark--strong);
  --card-list-bg--fx:               var(--color-accent--lilac);
  --card-list-shadow:               var(--fx-shadow--soft);
  --card-list-filter--fx:           var(--fx-glow);
  --card-list-transition:           var(--transition-state--slow), var(--transition-fade-in);
  --card-list-will-change:          opacity, background;

  --card-overlay-bg-color:          var(--color-accent-dark--soft);
  --card-overlay-backdrop:          var(--fx-blur-xxl) var(--fx-contrast);
  --card-overlay-shadow:            var(--fx-shadow-inset--ghosty);
  --card-overlay-transition:        var(--transition-fade-in--slow);
  --card-overlay-will-change:       opacity;
  --card-overlay-transition--fx:    var(--transition-fade-out--slow);
}


/* ====== CONTENT CARD ====== */
.card{
  position: relative;
  display: flex;
  flex-direction: column;
  border: var(--card-border);
  min-block-size: 100%;
  padding: var(--card-padding);
  gap: var(--card-gap);
  background-color: var(--card-background);
  border-radius: var(--card-radius);
  backdrop-filter: var(--card-backdrop);
  box-shadow: var(--card-shadow);
}

/* ====== Card: VARIATIONS ======*/
/* === PLAIN (w/o bg, shadow, backdrop) === */
.card--plain  { 
  background: transparent; 
  box-shadow: none; 
  backdrop-filter: none;
  border-style: hidden;
}

/* === FLUSH (padding / gap 0) === */
.card--flush { 
  padding: 0;  
  gap: 0;
}
.card--flush .card__head { 
  row-gap: 0; 
  column-gap: 0; 
}


/* === ANIMATE (on hover: scale + filter) === */
.card--animate { 
  transition: var(--card-transition); 
}
.card--animate:is(:hover,:focus-visible) {
  transform: var(--card-transform--fx);
  filter: var(--card-filter--fx);
}


/* === CENTER === */
.card--center {
  align-items: center;
  text-align: center;
}
.card--center :where(.prose) {
   margin-inline: auto; 
}


/* === CONDENSE (smaller gap) === */
.card--condense { 
  gap: var(--card-gap--small);
  padding: var(--card-gap); 
}

/* === STRETCH === */
.card--stretch {
  min-inline-size: 100%;
}

/* ====== CARD AREAS ====== */
/* === HEAD === */
.card__head { 
  display: flex;
  flex-direction: row;
  place-items: stretch;
  justify-content: space-between;
  column-gap: var(--card-gap);
}
.card__badges{ grid-area: badges; }
.card__head--center {
  justify-content: center;
}
.card__head--column {
  flex-direction: column;
  row-gap: var(--card-gap--small); 
}


/* === TITLE === */
.card__title { 
  grid-area: title; 
  min-width: 0; 
  align-items: center; 
  display: inline-flex; 
  gap: var(--card-gap--small);
}


/* === BODY === */
/* Refactor: move font-related ordered list properties to typography */
.card__body { display: contents; }
.card__foot { display: contents; }

.card__list {
  list-style: none;
  padding-inline: 0;
  margin-block: 0;
  display: inline-grid;
  gap: var(--card-list-gap);
}
@media (max-width: 900px) {
  .card__list {
    grid-auto-flow: row;
    grid-template-columns: auto;
  }
}
.card__list-item { margin: 0; }

.card__list-link {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--card-list-gap);
  align-items: flex-start;
  padding: var(--card-list-padding);
  border-radius: var(--card-radius--inner);
  background: var(--card-list-bg);
  box-shadow: var(--card-list-shadow);
  opacity: .7;
  text-decoration: none;
  color: inherit;
  transition: var(--card-list-transition);
  will-change: var(--card-list-will-change);
}

#blog-chapter-target [data-blog-chapter] > :is(h1, h2, h3):first-child {
  display: none;
}

.prose#blog-chapter-target > :is(*[hidden],h2){
  display: none;
}
:is([data-chapter-prev],[data-chapter-next])[hidden] {
  opacity: 0;
  pointer-events: none;
}

.card__list-index,.card__list-title {
  font-size: var(--font-size-m);
  line-height: var(--line-height-m);
  color: var(--color-accent-light);
}

.card__list-chapter {
  display: flex;
  flex-direction: column;
  gap: var(--card-list-gap);
  opacity: 0.85;
}

.card__list-summary {
  font-size: var(--font-size-s);
  font-weight: var(--font-weight-thin);
  line-height: var(--line-height-l);
}

/* === hover, focus & active states === */
.card__list-link:is(:hover,:focus-visible,[data-chapter][data-active]){
  opacity: 1;
  background: var(--card-list-bg--fx);
}

.card__list-link:is(:hover,:focus-visible,[data-chapter][data-active])
:where(span:first-child,strong){
  opacity: 1;
  font-weight: var(--font-weight-bold);
  filter: var(--card-list-filter--fx);
}

.card__list-chapter:is(:hover,:focus-visible,[data-chapter][data-active]) {
  opacity: 1;
  font-weight: var(--font-weight-thick);
}


/* ──────────────────────────────
 * Blog Entry – Header Layout
 * ──────────────────────────── */

.entry-header {
  display: grid;
  grid-template-columns: 55% auto;
  gap: var(--card-gap);
  align-items: center;
}

@media (max-width: 900px) {
  .entry-header {
    grid-template-columns: 1fr;
    place-items: center;
  }
}

.entry-header__content {
  display: flex;
  flex-direction: column;
  gap: var(--flow-gap);
  align-items: center;
  padding: var(--card-padding);
}

.entry-header__eyebrow {
  font-size: var(--font-size-s);
  opacity: 0.7;
  line-height: var(--line-height-xxs);
  letter-spacing: var(--letter-spacing-xxl);
}

/* ──────────────────────────────
 * Blog Entry – Content Split
 * (ToC + Chapter)
 * ──────────────────────────── */

.entry-content {
  display: grid;
  grid-template-columns: 33% auto;
  gap: var(--card-gap);
  position: relative;
}

@media (max-width: 900px) {
  .entry-content {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr auto;
  }
}

/* Vertikaler Divider zwischen ToC und Inhalt */
.entry-content::before {
  content: "";
  position: absolute;
  inset-block: var(--card-padding); /* oben/unten bündig mit Card-Padding */
  inset-inline-start: calc(33% + (var(--card-gap) / 2));
  inline-size: 1px;
  background: linear-gradient(
    to bottom,
    transparent -5%,
    color-mix(in oklab, var(--color-accent-light--ghosty) 70%, transparent),
    transparent 105%
  );
  pointer-events: none;
}

@media (max-width: 900px) {
  .entry-content::before {
    display: none;
  }
}

/* ──────────────────────────────
 * Card Variants für Entry-Layout
 * ──────────────────────────── */

.card--chapter {
  display: flex;
  flex-direction: column;
  padding-block: 0;
  padding-inline-end: 0;
}

.card--chapter .card__body {
  display: block;
  flex: 1 1 auto;
}

.card--chapter .card__foot {
  margin-block-start: auto;
}

.card--content {
  padding-block: 0;
  padding-inline-start: 0;
}

.card__divider {
  display: none;
}

/* ──────────────────────────────
 * Mobile Tweaks
 * ──────────────────────────── */

@media (max-width: 900px) {
  .card--content,
  .card--chapter {
    padding-inline: 0;
  }

  .card--content + .card__divider {
    display: inline-block;
    height: 1px;
    margin-block: var(--card-gap);
    background: linear-gradient(
      to right,
      transparent -5%,
      color-mix(in oklab, var(--color-accent-light--ghosty) 70%, transparent),
      transparent 105%
    );
  }

  .card--content :where(.card__list-summary) {
    display: none;
  }
}




/* ===== Card: OVERLAY ===== */
.card__overlay {
  position: absolute;
  inset-inline: 0;
  display: flex;
  flex-direction: column;
  gap: var(--card-gap);
  padding: calc(.75 * var(--card-padding));
  backdrop-filter: var(--card-overlay-backdrop);
  transition: var(--card-overlay-transition);
  will-change: var(--card-overlay-will-change);
  box-shadow: var(--card-overlay-shadow);
  background-color: var(--card-overlay-bg-color);
}
.card__overlay--head { inset-block-start: 0; border-radius: var(--card-radius) var(--card-radius) 0 0; }
.card__overlay--foot { inset-block-end: 0;   border-radius: 0 0 var(--card-radius) var(--card-radius); }
.card__overlay--plain  { 
  background: none; 
  box-shadow: none; 
  backdrop-filter: none;
  
  border-style: hidden;
}
.card__overlay-item  { 
  display: inline-flex;
  flex-wrap: nowrap;
  inline-size: 100%;
  justify-content: space-between;
  padding: 0;
  margin: 0;
}

.card__overlay-item :where(h1,h2,h3) {
  text-wrap: balance;
}

.card__overlay-item:where(p) {
  margin: 0;
  font-size: var(--font-size-s);
  line-height: var(--line-height-xl);
  opacity: 0.9;
}

.card__overlay--hover[data-show="false"] {
  opacity: 0;  
}

*:hover > .card__overlay,
.card__overlay[data-show="true"] {
  opacity: 1;
  transition: var(--card-overlay-transition--fx);
}


/* ===== CARD: MISC ===== */
.card__spacer { flex: 1 1 auto; }
