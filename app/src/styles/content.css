/* ============================================ */
/* ======== CONTENT: COMPONENTS & ELEMENTS ==== */
/* ====== Depends on: tokens, site, typography ====== */
/* ============================================ */
.content-section :where(h1,h2,h3,h4) {
  margin: 0 0 calc(var(--flow-gap) * .5) 0;
}

.content-section {
  display: grid;
  flex-wrap: wrap; 
  gap: var(--section-gap);
  align-items: stretch; 
  max-inline-size: 100%;
  grid-template-columns: 1fr;
}
.content-section:first-of-type,
* + .content-section { 
  margin-block-start: var(--section-gap); 
}
.content-section.cols-2 { grid-template-columns: repeat(2, 1fr); }
.content-section.cols-3 { grid-template-columns: repeat(3, 1fr); }

@media (max-width: 800px)  { .content-section.cols-2 { grid-template-columns: 1fr; }}
@media (max-width: 1100px) { .content-section.cols-3  { grid-template-columns: repeat(2, 1fr); }}

.content-section--masonry {
  display: block;
  column-gap: var(--section-gap);
  column-fill: balance;
  column-count: 2;
}

@media (max-width: 800px)  { .content-section--masonry { column-count: 1; } }


.content-section--masonry > * {
  break-inside: avoid;
  -webkit-column-break-inside: avoid;
  page-break-inside: avoid;
  margin-block-end: var(--section-gap);
}
.content-section--masonry .card { min-block-size: auto; }

/* ====== CONTENT CARD ====== */
.card{
  display: grid;
  position: relative;
  grid-template-areas:
    "card-head"
    "card-body"
    "card-foot";
  grid-template-rows: auto 1fr auto;

  min-block-size: 100%;
  padding: var(--card-padding);
  gap: var(--card-gap);

  border-radius: var(--radius-l);
  backdrop-filter: var(--card-backdrop);
  box-shadow: var(--card-shadow);
}

/* ====== Card: VARIATIONS ======*/
/* === PLAIN (w/o bg, shadow, backdrop) === */
.card--plain  { 
  background: transparent; 
  box-shadow: none; 
  backdrop-filter: none;
}
.card--plain :where(.prose){ 
  font-weight: var(--font-weight-thick);
}


/* === FLUSH (padding / gap 0) === */
.card--flush { 
  padding: 0;  
  gap: 0;
}
.card--flush .card__head { 
  row-gap: 0; 
  column-gap: 0; 
}


/* === ANIMATE (on hover: scale + filter) === */
.card--animate { 
  transition: var(--card-transition); 
}
.card--animate:is(:hover,:focus-visible) {
  transform: var(--card-transform--fx);
  filter: var(--card-filter--fx);
}


/* === CENTER === */
.card--center { 
  justify-items: center; 
  text-align: center; 
}
.card--center :where(.prose) {
   margin-inline: auto; 
}


/* === CONDENSE (smaller gap) === */
.card--condense { 
  gap: var(--flow-gap); 
}

/* === STRETCH === */
.card--stretch {
  min-inline-size: 100%;
}

/* ====== CARD AREAS ====== */
/* === HEAD === */
.card__head { 
  grid-area: card-head; 
  display: grid;
  grid-template-areas: "title badges";
  grid-template-columns: minmax(0,1fr) auto;
  align-items: flex-start;             /* vertikal mittig */
  column-gap: var(--card-gap);
}
.card__head > .card__badges{ grid-area: badges; }
@media (max-width: 900px) {
  .card__head{
    grid-template-areas:
      "title"
      "badges"; 
  } 
}
.card__head--column {
  grid-template-areas:
    "title"
    "badges";
  grid-template-columns: 1fr;
  row-gap: var(--flow-gap); 
}


/* === TITLE === */
.card__title { 
  grid-area: title; 
  min-width: 0; 
  align-items: center; 
  display: inline-flex; 
  gap: var(--flow-gap);
}


/* === BODY === */
/* Refactor: move font-related ordered list properties to typography */
.card__body { grid-area: card-body; display: contents; }

.card__body > ol {
  list-style: none;
  padding: 0;
  margin: 0;
  display: inline-grid;
  list-style: none;
  gap: var(--flow-gap);
}
@media (max-width: 900px) {
  .card__body > ol {
    grid-auto-flow: row;
    grid-template-columns: auto;
  }
}
.card__body > ol > li { margin: 0; }

/* Refactor: find a better selector for .card__body > ol > li > a */
.card__body > ol > li > a {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--card-gap);
  align-items: flex-start;
  padding: var(--control-padding);
  border-radius: var(--radius-m);
  background: var(--card-list-bg);
  box-shadow: var(--card-list-shadow);
  opacity: .7;
  text-decoration: none;
  color: inherit;
  transition: var(--card-list-transition);
  will-change: var(--card-list-will-change);
}

#blog-chapter-target [data-blog-chapter] > :is(h1, h2, h3):first-child {
  display: none;
}

.card__body > ol > li > a > span:first-child {
  font-weight: var(--font-weight-thick);
  font-size: var(--font-size-m);
  line-height: var(--line-height-xl);
  color: var(--color-accent-light);
}

.card__body > ol > li > a > div {
  display: flex;
  flex-direction: column;
  gap: calc(var(--flow-gap) * 2);
  opacity: 0.85;
}

.card__body > ol > li > a > div > strong {
  font-weight: var(--font-weight-thick);
  font-size: var(--font-size-m);
  line-height: var(--line-height-xl);
}

.card__body > ol > li > a > div > span {
  font-size: var(--font-size-s);
  font-weight: var(--font-weight-thin);
  line-height: var(--line-height-xl);
  
}

/* === hover, focus & active states === */
.card__body > ol > li > a:is(:hover,:focus-visible,[data-chapter][data-active]){
  opacity: 1;
  background: var(--card-list-bg--fx);
}

.card__body > ol > li > a:is(:hover,:focus-visible,[data-chapter][data-active])
:where(span:first-child,strong){
  opacity: 1;
  font-weight: var(--font-weight-bold);
  filter: var(--card-list-filter--fx);
}

.card__body > ol > li > a:is(:hover,:focus-visible,[data-chapter][data-active]) > div {
  opacity: 1;
  font-weight: var(--font-weight-thick);
}


/* === FOOT === */
.card__foot { grid-area: card-foot; display: contents; }



/* ===== Card: OVERLAY ===== */
.card__overlay {
  position: absolute;
  inset-inline: 0;
  display: flex;
  flex-direction: column;
  gap: var(--card-gap);
  padding: calc(.75 * var(--card-padding));
  backdrop-filter: var(--card-overlay-backdrop);
  transition: var(--card-overlay-transition);
  will-change: var(--card-overlay-will-change);
  box-shadow: var(--card-overlay-shadow);
}
.card__overlay--head { inset-block-start: 0; border-radius: var(--radius-m) var(--radius-m) 0 0; }
.card__overlay--foot { inset-block-end: 0;   border-radius: 0 0 var(--radius-m) var(--radius-m); }
.card__overlay-item  { 
  display: inline-flex;
  flex-wrap: nowrap;
  inline-size: 100%;
  justify-content: space-between;
  padding: 0;
  margin: 0;
}

.card__overlay-item :where(h1,h2,h3) {
  font-size: var(--font-size-m);
  text-wrap: balance;
}

.card__overlay-item:where(p) {
  margin: 0;
  font-size: var(--font-size-s);
  line-height: var(--line-height-xl);
  opacity: 0.9;
}

.card__overlay[data-show="false"] {
  opacity: 0;  
}

*:hover > .card__overlay,
.card__overlay[data-show="true"] {
  opacity: 1;
  transition: var(--card-overlay-transition--fx);
}


/* ===== CARD: MISC ===== */
.card__spacer { flex: 1 1 auto; }




/* ====== PROSE CONTENT ====== */

.prose {
  display: flex;
  flex-direction: column;
  gap: var(--flow-gap);
  margin-block: var(--flow-gap);
  max-inline-size: clamp(65ch, 35vw, 95ch);
}
.prose--unlimited { max-inline-size: none}
.prose:first-child { margin-block-start: 0; }
.prose > * { 
  margin: 0; 
}

.prose ul,
.prose ol {
  padding-inline-start: 1.2em;
  margin: 0;
}

