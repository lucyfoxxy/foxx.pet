---
import { Template } from '@Frontend';
import Icons from '@Assets/Icons.astro';
import { ASSETS, COVERS, ICON_REGISTRY } from '@Assets/assets.registry';
import { Picture } from 'astro:assets';
import { isProd } from '@utils/env';
export const prerender = !isProd;

if (isProd) {
  return Astro.redirect('/');
}

const formatClassList = (value: string, fallback = 'default') =>
  value && value.trim().length > 0
    ? value
        .trim()
        .split(/\s+/)
        .map((cls) => `.${cls}`)
        .join(' ')
    : fallback;

const navSections = [
  { id: 'overview', label: 'Style Overview' },
  { id: 'shadows', label: 'Shadows & Glows' },
  { id: 'cards', label: 'Cards' },
  { id: 'controls', label: 'Buttons & Badges' },
  { id: 'layouts', label: 'Control Layouts' },
  { id: 'media', label: 'Media & Icons' },
  { id: 'typography', label: 'Typography' },
];

const stylesheetStats = [
  { file: 'src/styles/base.css', classes: 2, tokens: 0 },
  { file: 'src/styles/content.css', classes: 27, tokens: 2 },
  { file: 'src/styles/controls.css', classes: 28, tokens: 5 },
  { file: 'src/styles/media.css', classes: 18, tokens: 1 },
  { file: 'src/styles/site.css', classes: 4, tokens: 0 },
  { file: 'src/styles/site_footer.css', classes: 12, tokens: 0 },
  { file: 'src/styles/site_header.css', classes: 9, tokens: 0 },
  { file: 'src/styles/table.css', classes: 13, tokens: 0 },
  { file: 'src/styles/tokens.css', classes: 0, tokens: 108 },
  { file: 'src/styles/typography.css', classes: 16, tokens: 2 },
];

const uniqueTotals = { classes: 110, tokens: 117 };

const unusedClasses = [
  'badge',
  'button--large',
  'card--ghost',
  'card__spacer',
  'controls--evenly',
  'controls--stretch',
  'header__bar',
  'header__bar--bottom',
  'header__bar--top',
  'media-empty',
  'media-icon--small',
  'media-image--placeholder',
  'table__price',
  'table__subtitle',
  'table__td',
  'table__td--right',
  'table__th',
  'table__th--left',
  'table__th--right',
  'table__tr',
  'table__unit',
  'table__wrap',
];

const unusedTokens: string[] = [];

const tokenAuditNote =
  'Glow-specific tokens were removed during the control refactor. The audit will return once the new token set is finalized.';

const mascotGallery = [
  {
    id: 'mascot-v1',
    label: 'Mascot (Hero render)',
    asset: ASSETS.mascot,
    token: 'ASSETS.mascot',
    description: 'Original hero render used throughout the landing + blog hero cards.',
  },

];

const surfaceEffects = [
  {
    id: 'surface-soft',
    label: 'Surface Soft Shadow',
    token: '--fx-shadow--soft',
    preview: 'shadow-preview--surface-soft',
    description: 'Subtle lift used on thumbnails and compact frames.',
  },
  {
    id: 'surface-default',
    label: 'Surface Default Shadow',
    token: '--fx-shadow',
    preview: 'shadow-preview--surface-default',
    description: 'Primary elevation for cards and media wrappers.',
  },
  {
    id: 'surface-strong',
    label: 'Surface Strong Shadow',
    token: '--fx-shadow--strong',
    preview: 'shadow-preview--surface-strong',
    description: 'High emphasis surfaces like header or footer.',
  },
];

const textEffects = [
  {
    label: 'Soft text glow',
    className: 'text-preview text-preview--soft',
    description: 'Default glow paired with prose body copy.',
  },
  {
    label: 'Strong text glow',
    className: 'text-preview text-preview--strong',
    description: 'Used for hero headings and call-to-action highlights.',
  },
  {
    label: 'Icon shadow',
    className: 'text-preview text-preview--icon',
    description: 'Drop shadow applied to all `.media-icon` glyphs.',
  },
];

const cardVariants = [
  {
    title: 'Default card',
    classes: '',
    note: 'Balanced spacing, frosted surface & default shadow stack.',
  },
  {
    title: 'Ghost card',
    classes: 'card--ghost',
    note: 'Accent tinted glass with a luminous border glow.',
  },
  {
    title: 'Plain card',
    classes: 'card--plain card--center',
    note: 'Removes backdrop & aligns content to center.',
  },
  {
    title: 'Flush media card',
    classes: 'card--flush',
    note: 'Zero padding – perfect for edge-to-edge media.',
    showMedia: true,
  },
  {
    title: 'Condensed animated card',
    classes: 'card--condense card--animate',
    note: 'Tighter vertical rhythm and hover scale effect.',
  },
];

const buttonVariants = [
  {
    label: 'Default button',
    classes: 'control control--button',
    description: 'Primary button surface.',
  },
  {
    label: 'Plain button',
    classes: 'control control--button control--plain',
    description: 'No backdrop or outline – integrates with media.',
  },
];

const buttonSizes = [
  {
    label: 'Small',
    classes: 'control control--button control--small',
  },
  {
    label: 'Default',
    classes: 'control control--button',
  },
  {
    label: 'Large',
    classes: 'control control--button control--large',
  },
  {
    label: 'Circle',
    classes: 'control control--button control--circle',
    icon: 'paw',
  },
];

const badgeVariants = [
  {
    label: 'Default badge',
    classes: 'control control--badge',
  },
  {
    label: 'Current badge',
    classes: 'control control--badge is-current',
  },
];

const layoutGroups = [
  {
    title: 'Alignment',
    variants: [
      { label: 'controls--start', classes: 'controls controls--start' },
      { label: 'controls--center', classes: 'controls controls--center' },
      { label: 'controls--end', classes: 'controls controls--end' },
      { label: 'controls--spread', classes: 'controls controls--spread' },
      { label: 'controls--around', classes: 'controls controls--around' },
      { label: 'controls--evenly', classes: 'controls controls--evenly' },
    ],
  },
  {
    title: 'Spacing & flow',
    variants: [
      { label: 'controls--tight', classes: 'controls controls--tight' },
      { label: 'controls--roomy', classes: 'controls controls--roomy' },
      { label: 'controls--nowrap', classes: 'controls controls--nowrap' },
      { label: 'controls--stretch', classes: 'controls controls--stretch' },
    ],
  },
];

const iconSizes = [
  { label: 'Small icon', classes: 'media-icon media-icon--small', kind: 'star' },
  { label: 'Default icon', classes: 'media-icon', kind: 'palette' },
  { label: 'Large icon', classes: 'media-icon media-icon--large', kind: 'sparkles' },
];

const iconCatalog = Object.keys(ICON_REGISTRY).sort((a, b) => a.localeCompare(b));

const mediaThumbs = [
  { alt: 'Placeholder cover', src: COVERS.placeholder },
  { alt: 'Lucys Journeys cover', src: COVERS.lucys_journeys },
  { alt: 'Placeholder cover duplicate', src: COVERS.placeholder },

];
---
<Template.Base>
  <section class="content-section">
    <Template.Card class="card--plain card--center card--condense">
      <Fragment slot="head">
        <h1 class="card__title">UI Test Bench</h1>
      </Fragment>
      <Fragment slot="body">
        <div class="prose">
          <p>
            Every surface, control and helper class used across the site is gathered here. Hover, focus and click
            elements to review their interactive states and elevation tokens.
          </p>
        </div>
      </Fragment>
      <Fragment slot="foot">
        <div class="controls controls--center controls--tight">
          {navSections.map((section) => (
            <a class="control control--button" href={`#${section.id}`}>
              {section.label}
            </a>
          ))}
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <section class="content-section" id="overview">
    <Template.Card class="card--plain" headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Class & token overview</h2>
        <p>Snapshot of selectors + CSS variables tracked across `src/styles`.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="overview-grid">
          <div class="overview-stats">
            <div class="stat stat--classes">
              <span class="stat__label">Unique classes</span>
              <strong class="stat__value">{uniqueTotals.classes}</strong>
              <span class="stat__hint">Across Astro components & pages</span>
            </div>
            <div class="stat stat--tokens">
              <span class="stat__label">Unique tokens</span>
              <strong class="stat__value">{uniqueTotals.tokens}</strong>
              <span class="stat__hint">Shadow, glow & color variables</span>
            </div>
          </div>
          <div class="overview-table-wrapper">
            <table class="overview-table">
              <thead>
                <tr>
                  <th scope="col">Stylesheet</th>
                  <th scope="col">Classes</th>
                  <th scope="col">Tokens</th>
                </tr>
              </thead>
              <tbody>
                {stylesheetStats.map((sheet) => (
                  <tr>
                    <th scope="row"><code>{sheet.file}</code></th>
                    <td>{sheet.classes}</td>
                    <td>{sheet.tokens}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          <div class="overview-audit">
            <div class="audit-card">
              <div class="audit-card__head">
                <h3>Unused selectors</h3>
                <span class="pill">{unusedClasses.length}</span>
              </div>
              <p class="audit-card__lede">
                Defined in stylesheets but currently not applied in any Astro page or script. Reclaim or drop to reduce
                bundle weight.
              </p>
              <div class="pill-grid" role="list">
                {unusedClasses.map((className) => (
                  <span class="pill pill--ghost" role="listitem">.{className}</span>
                ))}
              </div>
            </div>
            <div class="audit-card">
              <div class="audit-card__head">
                <h3>Unused tokens</h3>
                <span class="pill">{unusedTokens.length}</span>
              </div>
              <p class="audit-card__lede">
                Variables with zero <code>var(--token)</code> references. Candidates for cleanup or future refactors.
              </p>
              {unusedTokens.length > 0 ? (
                <div class="pill-grid" role="list">
                  {unusedTokens.map((token) => (
                    <span class="pill pill--ghost" role="listitem">{token}</span>
                  ))}
                </div>
              ) : (
                <p class="audit-card__note">{tokenAuditNote}</p>
              )}
            </div>
          </div>
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <section class="content-section cols-2" id="shadows">
    <Template.Card headClass="card__head--column" class="card--condense">
      <Fragment slot="head">
        <h2 class="card__title">Surface shadows</h2>
        <p>Tokens that set depth cues for cards, media and controls.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="swatch-grid">
          {surfaceEffects.map((effect) => (
            <div class="swatch" id={effect.id}>
              <div class:list={["shadow-preview", effect.preview]} aria-hidden="true"></div>
              <div class="swatch__meta">
                <strong>{effect.label}</strong>
                <code>{effect.token}</code>
                <p>{effect.description}</p>
              </div>
            </div>
          ))}
        </div>
      </Fragment>
    </Template.Card>

    <Template.Card headClass="card__head--column" class="card--condense">
      <Fragment slot="head">
        <h2 class="card__title">Text glow stack</h2>
        <p>Glows & shadows layered onto copy and iconography.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="swatch-grid">
          {textEffects.map((effect) => (
            <div class="swatch">
              <div class={effect.className}>
                <span>Glowing text</span>
              </div>
              <div class="swatch__meta">
                <strong>{effect.label}</strong>
                <p>{effect.description}</p>
              </div>
            </div>
          ))}
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <section class="content-section" id="cards">
    <Template.Card class="card--plain" headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Card variations</h2>
        <p>Core `Template.Card` surfaces with utility modifiers.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="card-grid">
          {cardVariants.map((variant) => (
            <Template.Card class={`${variant.classes} showcase-card`} headClass="card__head--column card--center">
              <Fragment slot="head">
                <h3 class="card__title">{variant.title}</h3>
              </Fragment>
              <Fragment slot="body">
                {variant.showMedia ? (
                  <div class="media-wrapper">
                    <div class="media-frame">
                      <Picture
                        src={COVERS.lucys_journeys}
                        formats={["webp"]}
                        inferSize
                        alt="Lucy looking into the stars"
                        class="media-image"
                      />
                    </div>
                  </div>
                ) : (
                  <div class="prose">
                    <p>{variant.note}</p>
                  </div>
                )}
              </Fragment>
              {!variant.showMedia && (
                <Fragment slot="foot">
                  <p class="showcase-card__note">{formatClassList(variant.classes, 'default card')}</p>
                </Fragment>
              )}
            </Template.Card>
          ))}
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <section class="content-section cols-2" id="controls">
    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Button variants</h2>
        <p>All button skins, hover glows and icon treatments.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="control-grid">
          {buttonVariants.map((variant) => (
            <div class="control-swatch">
              <span class={variant.classes}>
                {variant.icon ? <Icons class="media-icon" kind={variant.icon} /> : variant.label}
              </span>
              <div class="control-swatch__meta">
                <strong>{variant.label}</strong>
                <p>{variant.description}</p>
                <code>{formatClassList(variant.classes)}</code>
              </div>
            </div>
          ))}
        </div>
      </Fragment>
    </Template.Card>

    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Sizes & shapes</h2>
        <p>Scale, stretch and circle helpers applied to controls.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="control-grid">
          {buttonSizes.map((variant) => (
            <div class="control-swatch">
              <span class={variant.classes}>
                {variant.icon ? <Icons class="media-icon" kind={variant.icon} /> : variant.label}
              </span>
              <div class="control-swatch__meta">
                <strong>{variant.label}</strong>
                <code>{formatClassList(variant.classes)}</code>
              </div>
            </div>
          ))}
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <section class="content-section cols-2" id="layouts">
    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Badges & states</h2>
        <p>Lightweight info tags and their interactive styles.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="control-grid">
          {badgeVariants.map((variant) => (
            <div class="control-swatch">
              <span class={variant.classes}>meta</span>
              <div class="control-swatch__meta">
                <strong>{variant.label}</strong>
                <code>{formatClassList(variant.classes)}</code>
              </div>
            </div>
          ))}
        </div>
      </Fragment>
    </Template.Card>

    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Control layout helpers</h2>
        <p>Alignment & gap utilities applied to `.controls` containers.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="layout-grid">
          {layoutGroups.map((group) => (
            <div class="layout-group">
              <h3>{group.title}</h3>
              {group.variants.map((variant) => (
                <div class="layout-group__row">
                  <div class="layout-group__label">{variant.label}</div>
                  <div class={variant.classes}>
                    <span class="control control--button control--small">Alpha</span>
                    <span class="control control--button">Beta</span>
                    <span class="control control--button control--plain">Gamma</span>
                  </div>
                </div>
              ))}
            </div>
          ))}
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <section class="content-section cols-2" id="media">
    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Media player shell</h2>
        <p>Gallery frame with interactive controls and progress indicator.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="media-wrapper media-wrapper--controls">
          <div class="media-frame">
            <Picture
              src={COVERS.lucys_journeys}
              formats={["webp"]}
              inferSize
              alt="Starry fox illustration"
              class="media-image"
            />
            <div class="media-progress" style="--p: .45;"></div>
          </div>
          <div class="control control--button control--circle control--media-tray">
            <button class="control control--button control--circle control--media media-prev" type="button" aria-label="Previous frame">❮</button>
            <button class="control control--button control--circle control--media media-pause" type="button" data-active="true" aria-label="Pause autoplay">
              <Icons class="media-icon" kind="pause" />
            </button>
            <button class="control control--button control--circle control--media media-play" type="button" data-active="false" aria-label="Start autoplay">
              <Icons class="media-icon" kind="play" />
            </button>
            <button class="control control--button control--circle control--media media-next" type="button" aria-label="Next frame">❯</button>
            <button class="control control--button control--circle control--media media-fullscreen" type="button" aria-label="Open lightbox">
              <Icons class="media-icon" kind="fullscreen" />
            </button>
          </div>
        </div>
      </Fragment>
    </Template.Card>

    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Mascot renders</h2>
        <p>Reference imagery for `.media-frame` and `.media-image` tokens.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="mascot-gallery">
          {mascotGallery.map((mascot) => (
            <div class="mascot-card" id={mascot.id}>
              <div class="media-frame">
                <Picture src={mascot.asset} formats={["webp"]} inferSize alt={mascot.label} class="media-image" />
              </div>
              <div class="mascot-card__meta">
                <strong>{mascot.label}</strong>
                <p>{mascot.description}</p>
                <code>{mascot.token}</code>
              </div>
            </div>
          ))}
        </div>
      </Fragment>
    </Template.Card>

    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Thumbnail rail & icons</h2>
        <p>Thumbnails, wrappers and icon sizing utilities.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="media-wrapper media-wrapper--thumbs">
          <button class="control control--button control--circle control--media media-prev is-thumbs-prev" type="button" aria-label="Previous thumbnails">❮</button>
          <div class="media-wrapper media-wrapper--frames" role="list" data-window="3">
            {mediaThumbs.map((thumb, index) => (
              <div
                class="media-frame media-frame--thumb"
                role="listitem"
                aria-current={index === 0 ? 'true' : undefined}
              >
                <Picture src={thumb.src} formats={["webp"]} inferSize alt={thumb.alt} class="media-image media-image--thumb" />
              </div>
            ))}
          </div>
          <button class="control control--button control--circle control--media media-next is-thumbs-next" type="button" aria-label="Next thumbnails">❯</button>
        </div>
        <div class="icon-section icon-section--sizes">
          <h3 class="icon-section__title">Icon sizing helpers</h3>
          <div class="icon-grid icon-grid--sizes">
            {iconSizes.map((icon) => (
              <div class="icon-grid__item">
                <Icons class={icon.classes} kind={icon.kind} />
                <span>{icon.label}</span>
              </div>
            ))}
          </div>
        </div>
        <div class="icon-section icon-section--catalog">
          <h3 class="icon-section__title">Icon catalog</h3>
          <div class="icon-grid icon-grid--catalog">
            {iconCatalog.map((icon) => (
              <div class="icon-grid__item icon-grid__item--catalog">
                <Icons class="media-icon" kind={icon} />
                <span>{icon}</span>
              </div>
            ))}
          </div>
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <section class="content-section" id="typography">
    <Template.Card headClass="card__head--column">
      <Fragment slot="head">
        <h2 class="card__title">Typography, prose & helpers</h2>
        <p>Examples of `.prose`, italic treatments and balanced headings.</p>
      </Fragment>
      <Fragment slot="body">
        <div class="typography-grid">
          <div>
            <h3 class="card__title">Balanced heading</h3>
            <div class="prose">
              <p>
                Fox companions help travellers find their way home. The copy stack uses `prose` spacing and inherits the
                soft text glow token.
              </p>
              <ul>
                <li>Responsive clamp-based font sizing.</li>
                <li>Drop shadow applied to each paragraph.</li>
                <li>Comfortable flow gaps between blocks.</li>
              </ul>
            </div>
          </div>
          <div>
            <h3 class="card__title">Utility mix</h3>
            <p class="is-italic">`.is-italic` for emphasis quotes.</p>
            <Template.Card class="card--plain card--condense showcase-card">
              <Fragment slot="head">
                <h4 class="card__title">Embedded plain card</h4>
              </Fragment>
              <Fragment slot="body">
                <div class="prose">
                  <p>Cards can be nested to preview combinations of utilities.</p>
                </div>
              </Fragment>
            </Template.Card>
          </div>
        </div>
      </Fragment>
    </Template.Card>
  </section>

  <style>
    .swatch-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(15rem, 1fr));
      gap: var(--flow-gap);
    }

    .overview-grid {
      display: grid;
      gap: var(--section-gap);
      grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
    }

    .overview-stats {
      display: grid;
      gap: var(--flow-gap);
    }

    .stat {
      padding: var(--section-gap);
      border-radius: var(--radius-xl);
      background: color-mix(in oklab, var(--color-light--ghosty) 35%, transparent);
      display: grid;
      gap: calc(var(--flow-gap) * 0.35);
    }

    .stat__label {
      font-size: var(--font-size-xs);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.75;
    }

    .stat__value {
      font-size: clamp(2.5rem, 4vw, 3rem);
      line-height: 1;
    }

    .stat__hint {
      font-size: var(--font-size-xs);
      opacity: 0.8;
    }

    .overview-table-wrapper {
      overflow-x: auto;
    }

    .overview-table {
      inline-size: 100%;
      border-collapse: collapse;
      font-size: var(--font-size-s);
    }

    .overview-table th,
    .overview-table td {
      padding: 0.35rem 0.5rem;
      border-bottom: 1px solid color-mix(in oklab, var(--card-border) 70%, transparent);
    }

    .overview-table tbody tr:last-child th,
    .overview-table tbody tr:last-child td {
      border-bottom: 0;
    }

    .overview-audit {
      display: grid;
      gap: var(--flow-gap);
      grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
    }

    .audit-card {
      padding: var(--section-gap);
      border-radius: var(--radius-l);
      border: 1px solid color-mix(in oklab, var(--card-border) 70%, transparent);
      background: color-mix(in oklab, var(--color-light--ghosty) 65%, transparent);
      display: grid;
      gap: calc(var(--flow-gap) * 0.75);
    }

    .audit-card__head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--flow-gap);
      font-size: var(--font-size-s);
    }

    .audit-card__head h3 {
      margin: 0;
    }

    .audit-card__lede {
      margin: 0;
      font-size: var(--font-size-xs);
      opacity: 0.85;
    }

    .audit-card__note {
      margin: 0;
      font-size: var(--font-size-xs);
      opacity: 0.8;
    }

    .pill-grid {
      display: grid;
      gap: 0.5rem;
      grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr));
      align-items: flex-start;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
      padding: 0.25rem 0.65rem;
      border-radius: 999px;
      background: color-mix(in oklab, var(--color-dark--soft) 60%, transparent);
      border: 1px solid color-mix(in oklab, var(--card-border) 60%, transparent);
      font-size: var(--font-size-xs);
      white-space: nowrap;
      text-align: center;
    }

    .pill--ghost {
      background: color-mix(in oklab, var(--card-border) 20%, transparent);
      color: var(--text-color);
    }

    .swatch {
      display: grid;
      gap: calc(var(--flow-gap) * 0.75);
    }

    .shadow-preview {
      inline-size: 100%;
      block-size: 6rem;
      border-radius: var(--radius-l);
      background: color-mix(in oklab, var(--color-light--ghosty) 80%, transparent);
      box-shadow: var(--fx-shadow--soft);
    }

    .shadow-preview--surface-soft { box-shadow: var(--fx-shadow--soft); }
    .shadow-preview--surface-default { box-shadow: var(--fx-shadow); }
    .shadow-preview--surface-strong { box-shadow: var(--fx-shadow--strong); }

    .text-preview {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--control-padding);
      border-radius: var(--radius-m);
      min-block-size: 4rem;
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-m);
      background: color-mix(in oklab, var(--color-dark--soft) 40%, transparent);
    }

    .text-preview--soft { text-shadow: var(--text-shadow), var(--text-glow); }
    .text-preview--strong { text-shadow: var(--text-shadow), var(--text-glow); }
    .text-preview--icon {
      text-shadow: var(--icon-shadow);
    }

    .swatch__meta {
      display: grid;
      gap: calc(var(--flow-gap) * 0.35);
      font-size: var(--font-size-xs);
    }

    .swatch__meta > strong {
      font-size: var(--font-size-s);
    }

    .card-grid {
      display: grid;
      gap: var(--section-gap);
      grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
    }

    .showcase-card {
      min-block-size: 100%;
    }

    .showcase-card__note {
      margin: 0;
      font-size: var(--font-size-xs);
      opacity: 0.8;
    }

    .control-grid {
      display: grid;
      gap: var(--flow-gap);
      grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
    }

    .control-swatch {
      display: grid;
      gap: calc(var(--flow-gap) * 0.5);
      align-content: start;
    }

    .control-swatch > span {
      justify-self: start;
    }

    .control-swatch__meta {
      display: grid;
      gap: calc(var(--flow-gap) * 0.35);
      font-size: var(--font-size-xs);
    }

    .layout-grid {
      display: grid;
      gap: var(--section-gap);
    }

    .layout-group {
      display: grid;
      gap: var(--flow-gap);
    }

    .layout-group__row {
      display: grid;
      gap: calc(var(--flow-gap) * 0.35);
    }

    .layout-group__label {
      font-size: var(--font-size-xs);
      opacity: 0.8;
    }

    .layout-group__row > .controls {
      background: color-mix(in oklab, var(--color-light--ghosty) 40%, transparent);
      padding: calc(var(--control-padding) * 0.75);
      border-radius: var(--radius-l);
    }

    .control--media-tray {
      display: flex;
      flex-wrap: wrap;
      gap: calc(var(--control-gap) * 0.75);
      justify-content: center;
      padding: var(--control-padding);
    }

    .icon-section {
      display: grid;
      gap: calc(var(--flow-gap) * 0.75);
    }

    .mascot-gallery {
      display: grid;
      gap: var(--flow-gap);
      grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr));
    }

    .mascot-card {
      display: grid;
      gap: calc(var(--flow-gap) * 0.5);
    }

    .mascot-card__meta {
      display: grid;
      gap: calc(var(--flow-gap) * 0.25);
      font-size: var(--font-size-xs);
    }

    .icon-section__title {
      margin: 0;
      font-size: var(--font-size-s);
      font-weight: var(--font-weight-bold);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.8;
    }

    .icon-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(8rem, 1fr));
      gap: var(--flow-gap);
      margin-block-start: var(--flow-gap);
    }

    .icon-grid--sizes {
      margin-block-start: 0;
      grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr));
    }

    .icon-grid--catalog {
      grid-template-columns: repeat(auto-fit, minmax(6.5rem, 1fr));
    }

    .icon-grid__item {
      display: grid;
      gap: calc(var(--flow-gap) * 0.35);
      justify-items: center;
      font-size: var(--font-size-xs);
    }

    .icon-grid__item--catalog {
      padding: calc(var(--control-padding) * 0.75) calc(var(--control-padding) * 0.5);
      border-radius: var(--radius-m);
      background: color-mix(in oklab, var(--color-light--ghosty) 32%, transparent);
    }

    .icon-grid__item--catalog > span {
      word-break: break-word;
      text-align: center;
      line-height: 1.25;
    }

    .typography-grid {
      display: grid;
      gap: var(--section-gap);
      grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr));
    }

    .typography-grid .prose {
      margin-block-start: 0;
    }

    @media (max-width: 900px) {
      .control--media-tray {
        justify-content: space-between;
      }
    }
  </style>
</Template.Base>
