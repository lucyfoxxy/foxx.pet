---
import { registry  } from '@Assets/icons.registry';
export interface Props {
  name: keyof typeof registry
  class?: string
  size?: string   
  title?: string
  stroke?: boolean
  strokeWidth?: number
}

const {
  name, class: cls = '', size = '1em', title,
  stroke = false, strokeWidth = 1.5,
} = Astro.props;

const icon = registry[name];
if (!icon) throw new Error(`Unknown icon: ${name}`);

const { vb, body, attrs = {} } = icon;
const labelled = !!title;
---

<svg
  class={`icon ${cls}`}
  width={size} height={size}
  viewBox={vb}
  preserveAspectRatio="xMidYMid meet"
  fill={stroke ? 'none' : 'currentColor'}
  stroke={stroke ? 'currentColor' : 'none'}
  stroke-width={stroke ? strokeWidth : undefined}
  stroke-linecap={stroke ? 'round' : undefined}
  stroke-linejoin={stroke ? 'round' : undefined}
  aria-hidden={labelled ? 'false' : 'true'}
  role="img"
  focusable="false"
  {...attrs}
>
  {title ? <title>{title}</title> : null}
  {typeof body === 'string' ? <Fragment set:html={body} /> : body}
</svg>

<style>
.icon{
  display:inline-block;
  inline-size:1em;
  block-size:1em;
  vertical-align:-0.125em; /* optischer Ausgleich wie bei Fonts */
}
</style>
