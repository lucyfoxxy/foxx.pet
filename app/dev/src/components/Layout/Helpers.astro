---
type Props = {
  enableAnalytics: boolean;
  goatCounterBase?: string;
  goatCounterScriptSrc: string;
};

const {
  enableAnalytics = false,
  goatCounterBase = '',
  goatCounterScriptSrc = 'https://gc.zgo.at/count.js',
} = (Astro.props ?? {}) as Partial<Props>;
---

<script>
  const yearEl = document.querySelector('[data-current-year]');
  if (yearEl) {
    yearEl.textContent = new Date().getFullYear().toString();
  }
</script>
<script>
  import initHeaderToggle from '@Scripts/utils/_headerToggle.js';
  import { runOnReady } from '@Scripts/utils/_runOnReady.js';

  runOnReady(initHeaderToggle);
</script>

{enableAnalytics && (
  <script data-goatcounter={`${goatCounterBase}/count`} async src={goatCounterScriptSrc}></script>
)}
