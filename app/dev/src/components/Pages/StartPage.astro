---
import Layout from '@Layout/Main.astro';
import Icon from '@Layout/SiteAssets/Icons.astro';
import { ASSETS } from '@Layout/SiteAssets/Images.astro';
import { getPageContent } from '@Content/siteContent';

export const prerender = true;

const content = getPageContent('home');

const meta = {
  title: content.title,
  description: content.description,
};

const hero = {
  ...content.hero,
  logo: ASSETS.logo_hero.src,
  image: ASSETS.logo_hero.src,
};

const intro = content.intro;
const feature = content.feature;
const links = content.contactLinks ?? [];
const contact = content.contact;

const isExternalLink = (href: string) => href.startsWith('http');
---
<Layout meta={meta}>
  <head>
    <link rel="preload" href={hero.image} as="image" type="image/webp" />
  </head>


    <section class="content-head media-hero section">   
 
      <div class="media-hero__logo">
        <img src={hero.logo} alt={hero.heading} loading="lazy" />   
      </div>
    </section>

    <section class="content-layout content-layout__split section">
      <section class="content-card">
        <h2>{intro.heading}</h2>
        <div class="prose">
          {intro.paragraphs.map((paragraph) => <p>{paragraph}</p>)}
        </div>
        <h3><i>{intro.signature}</i></h3>
      </section>

      <section class="content-card">
        <h2>{feature.heading}</h2>
        <p>{feature.description}</p>
        <div class="feature-slot">
          <p>{feature.placeholder}</p>
        </div>
      </section>
    </section>

    <section class="content-card section">
      <h2>{contact.heading}</h2>
      <div class="button__large--wrap">
        {links.map((link) => (
          <a
            class={`button__large button__large--${link.kind}`}
            href={link.href}
            rel={isExternalLink(link.href) ? 'noopener noreferrer' : undefined}
            target={isExternalLink(link.href) ? '_blank' : undefined}
          >
            <span class="button__large--icon"><Icon kind={link.kind} /></span>
            <span>{link.label}</span>
          </a>
        ))}
      </div>
    </section>

</Layout>
