---
import Layout from '@Layout/Main.astro';
import Icon from '@Layout/SiteAssets/Icons.astro';
import { ASSETS } from '@Assets/ui';
import { getPageContent } from '@Content/siteContent';
import { Image,Picture } from 'astro:assets';
export const prerender = true;

const content = await getPageContent('home');

const meta = {
  title: content.title,
  description: content.description,
};

const hero = {
  ...content.hero,
  logo: ASSETS.logo_hero.src,
  image: ASSETS.logo_hero.src,
};

const intro = content.intro;
const feature = content.feature;
const links = content.contactLinks ?? [];
const contact = content.contact;
const albumSlug = 'bestof';
const shareKey = 'KEkdKYpvFNPFgS654sbWB28rHuXIohcLo5MtrD1BERFqwHOtrQjmDxMhsRTnRSsKRSw';
const isExternalLink = (href: string) => href.startsWith('http');
---
<Layout meta={meta}>
  <head>
    <link rel="preload" href={ASSETS.logo_hero.src} as="image" type="image/webp" />
  </head>

  <section class="content-section">
    <div class="card card--plain is-centered media-hero is-condensed">
      
      <h1>{hero.heading}</h1>
      

      <Picture
        src={ASSETS.logo_hero}
        formats={['webp']}
        inferSize  
        alt={hero.heading}
        fetchpriority="high"
        class="media-hero__logo"
      />

      
      <h3 class="is-italic">...Eeeeeeeeeeeeeeeeeeeeek!</h3>
      
    </div>   
  </section>

  <section class="content-section cols-2">
    <section class="content-section">
      <div class="card">
        <h2>{intro.heading}</h2>
        <div class="prose">
          {intro.paragraphs.map((paragraph) => <p>{paragraph}</p>)}
        </div>
        <h3><i>{intro.signature}</i></h3>
        

      </div>
      <div class="card">
        <h3>Reach the Fops</h3>
        <div class="button--large--wrap">
          {links.map((link) => (
            <a
              class={`button button--large button--large--${link.kind}`}
              href={link.href}
              rel={isExternalLink(link.href) ? 'noopener noreferrer' : undefined}
              target={isExternalLink(link.href) ? '_blank' : undefined}
            >
              <span class="button__icon"><Icon kind={link.kind} /></span>
              
            </a>
          ))}
        </div>
      </div>
    </section>
    <div class="card">
      <h2>{feature.heading}</h2>
      <div
        class="media__hook"
        data-slug={albumSlug}
        data-autoplay="true"
        data-interval="8000"
        data-random="true"
        data-share-key={shareKey}
      >
        
        <div class="media__wrapper">
          <div class="media__frame media__frame--compact" role="button" tabindex="0" aria-label="Open artwork in lightbox">
            <img class="media__image" alt="" />
            <div class="media__progress" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </div>  
  </section>


  <script>
    import initGalleryIntro from '@Scripts/galleryViewer_compact.js';
    import { runOnReady } from '@Scripts/utils/_runOnReady.js';
    runOnReady(initGalleryIntro);
  </script>
</Layout>
