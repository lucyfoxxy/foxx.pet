---
import Icon from '@Design/Icons.astro';
import { ASSETS } from '@Design/Assets.astro';
export const defaults = {
  title: 'Home - Faelis Paw Artistry',
  hero: {
    mascot: { src: ASSETS.mascot.src, alt: '' },
    logo: { src: ASSETS.logo.src, alt: 'Faelis Paw Artistry' },
  },
  intro: {
    heading: 'Welcome,',
    paragraphs: [
      'My name is Faelis Skribblekitty, passionate artistic kitten since 2003.',
      "Whether you need some logo for your website, a ref-sheet / badge for your fursona or something completely different <i> - maybe something kinky? Love it! -</i> You've found the artistic kitten, suitable for all sorts of creative tasks! ",
      'Wanna see my art style? <i>Take a look at my <a href="/galleries">Gallery</a>! </i>',
    ],
    signature: '<i>Faelis Skribblekitty ðŸ’œ</i>',
  },
  gallery: {
    slug: 'bestof',
    heading: 'Preview:',
    autoplay: true,
    interval: 7000,
    random: true,
  },
  links: [
    { href: 'https://t.me/faelispawartistry', label: 'Telegram', kind: 'telegram' },
    { href: 'mailto:info@faelis.art', label: 'Email', kind: 'mail' },
    { href: 'https://www.facebook.com/FaelisPawArtistry', label: 'Facebook', kind: 'facebook' },
    { href: 'https://www.instagram.com/faeliskitty', label: 'Instagram', kind: 'instagram' },
    { href: 'https://www.furaffinity.net/user/faelis', label: 'FurAffinity', kind: 'furaffinity' },
  ],
  headings: {
    welcome: 'Welcome,',
    preview: 'Preview:',
    contact: 'Contact:',
  },
};

const props = Astro.props ?? {};
const {
  hero = defaults.hero,
  intro = defaults.intro,
  gallery = defaults.gallery,
  links = defaults.links,
  headings = {},
} = props;

const welcomeHeading = headings?.welcome ?? intro.heading ?? defaults.headings.welcome;
const previewHeading = headings?.preview ?? gallery.heading ?? defaults.headings.preview;
const contactHeading = headings?.contact ?? defaults.headings.contact;

const { slug, autoplay = true, interval = 7000, random = true, heading: galleryHeading } = gallery;

const isExternalLink = (href) => typeof href === 'string' && href.startsWith('http');

export const title = defaults.title;
---
<head>
  <link rel="preload" href={hero.mascot.src} as="image" type="image/webp" />
</head>

<section class="media-hero section">
  <img class="media-hero__mascot" src={hero.mascot.src}  alt={hero.mascot.alt ?? ''} />
  <img class="media-hero__logo" src={hero.logo.src} alt={hero.logo.alt} />
</section>

<section class="content-layout content-layout__split section">
  <section class="content-card">
    <h2 set:html={welcomeHeading}></h2>
    <div class="prose">
      {intro.paragraphs.map((paragraph) => (
        <p set:html={paragraph}></p>
      ))}
    </div>
    <h3 set:html={intro.signature}></h3>
  </section>

  <section
    class="content-card media-gallery__hook"
    data-slug={slug}
    data-autoplay={String(autoplay)}
    data-interval={String(interval)}
    data-random={String(random)}
  >
    <h2 set:html={galleryHeading ?? previewHeading}></h2>

      <div class="media-gallery">
        <div class="media-gallery__frame compact">
          <img class="media-gallery__image compact" alt="Best of artworks" loading="lazy" />
          <div class="media-gallery__progress compact" />
        </div>
      </div>

  </section>
</section>

<section class="content-card section">
  <h2 set:html={contactHeading}></h2>
  <div class="ui-btn__contact--wrap">
    {links.map((l) => {
      const external = isExternalLink(l.href);
      return (
        <a
          class={`ui-btn__contact ui-btn__contact--${l.kind}`}
          href={l.href}
          rel={external ? 'me noopener noreferrer' : 'me'}
          target={external ? '_blank' : undefined}
        >
          <span class="ui-btn__contact--icon"><Icon kind={l.kind} /></span>
          <span>{l.label}</span>
        </a>
      );
    })}
  </div>
</section>

<script>
  import initGalleryIntro from '@Scripts/galleryViewer_compact.js';
  import { runOnReady } from '@Scripts/utils/_runOnReady.js';

  runOnReady(initGalleryIntro);
</script>
