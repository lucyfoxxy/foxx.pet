---
import { getPageContent } from '@Content/siteContent';
import Card from '@Layout/Card.astro';

interface CategoryEntry {
  slug: string;
  title: string;
  description?: string;
  href?: string;
}

const { categories } = Astro.props as { categories: CategoryEntry[] };
const content = await getPageContent('galleries');
const introParagraphs = content.introParagraphs ?? [content.description];
---

  <section class="content-section">
    <Card class="card--plain is-centered">
      <Fragment slot="head">
        <h1 class="card__title">{content.title}</h1>
      </Fragment>

      <Fragment slot="body">
        {introParagraphs.map((paragraph) => (
          <p>{paragraph}</p>
        ))}
      </Fragment>
    </Card>
  </section>

<section class="content-section cols-3">
    
  {categories.map(({ slug, title, description, href }) => (
    
    <a href={href ?? `/galleries/${slug}`} aria-label={`Open ${title}`}>
      <Card class="card--light is-animated is-centered" headClass="card__head--column">
        <Fragment slot="head">
          <h3 class="card__title">{title}</h3>
        </Fragment>
        <Fragment slot="body">
          {description ? <p>{description}</p> : null}

          <div class="card__spacer" aria-hidden="true"></div>
          <div class="media-album__cover" data-slug={slug}>
            <div class="media-album__cover-placeholder" aria-hidden="true"></div>
          </div>
        </Fragment>
      </Card>
    </a>
  ))}

</section>
