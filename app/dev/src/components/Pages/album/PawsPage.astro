---
import AlbumPage from '@Templates/albumPage.astro';
import Card from '@Templates/Card.astro';
import { getNavLabelParts, getPageContent } from '@Content/siteContent';

interface CategoryEntry {
  slug: string;
  title: string;
  description?: string;
  href?: string;
}

const { categories } = Astro.props as { categories: CategoryEntry[] };
const content = await getPageContent('galleries');
const introParagraphs = content.introParagraphs ?? (content.description ? [content.description] : []);
const { icon, emoji } = getNavLabelParts(content);
---
<AlbumPage header={{ title: content.title, icon, emoji, paragraphs: introParagraphs }}>
  {categories.map(({ slug, title, description, href }) => (
    <a href={href ?? `/galleries/${slug}`} aria-label={`Open ${title}`}>
      <Card class="card--light is-animated is-centered" headClass="card__head--column">
        <Fragment slot="head">
          <h3 class="card__title">{title}</h3>
        </Fragment>
        {description ? (
          <Fragment slot="body">
            <p>{description}</p>
          </Fragment>
        ) : null}
        <Fragment slot="foot">
          <div class="media-image placeholder" data-slug={slug}></div>
        </Fragment>
      </Card>
    </a>
  ))}
</AlbumPage>
