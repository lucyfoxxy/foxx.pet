---
import ICONS from '@Assets/Icons.astro';

type NavLink = {
  href: string;
  label: string;
  emoji?: string;
  icon?: string;
  includeInHeader?: boolean;
  isActive?: boolean;
  weight?: number;
};

type Props = {
  navLinks: NavLink[];
  meta?: { title?: string; description?: string; url?: string };
};

const { navLinks = [] } = (Astro.props ?? {}) as Props;

---
<header class="header" aria-label="Primary navigation">
  <nav class="header__nav controls controls--evenly  controls--roomy controls--nowrap">
    {navLinks
      .filter((link) => link.includeInHeader)
      .map((link) => (
        <a
          class="control control--button control--small control--ghost"
          href={link.href}
          data-active={link.isActive ? 'true' : undefined}
        >
          <div class="header__nav-item">
            <span class="header__nav-symbol" aria-hidden="true">
              <ICONS class="media-icon" name={link.icon} />
            </span>
            <span class="header__nav-text">{link.label}</span>
          </div>
        </a>
      ))}
  </nav>
</header>

<script>
  import { ResponsiveSiteHeader, observer } from '@Scripts/siteHeaderSticky.js';
  import { runOnReady } from '@Scripts/utils/_runOnReady.js';
  runOnReady(() => {
    const cleanup = ResponsiveSiteHeader();
    observer();
    if (typeof cleanup === 'function') {
      window.addEventListener('astro:before-swap', cleanup, { once: true });
    }
  });
</script>
