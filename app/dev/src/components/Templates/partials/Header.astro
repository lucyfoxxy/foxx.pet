---
import { ASSETS } from '@Assets/ui';
import ICONS from '@Assets/Icons.astro';
type NavLink = {
  href: string;
  label: string;
  emoji?: string;
  icon?: string;
  includeInHeader?: boolean;
  isActive?: boolean;
};
type Breadcrumb = {
  label: string;
  href: string;
  isCurrent: boolean;
};
type Props = {
  navLinks: NavLink[];
  meta?: { title?: string; description?: string; url?: string };
  breadcrumbs: Breadcrumb[];
};

const { navLinks = [], breadcrumbs = [] } = (Astro.props ?? {}) as Props;
const hasActions = Astro.slots.has('actions');
---


<header class="header" aria-label="Primary navigation">
  <a class="header__logo" aria-label="Home" href="/">
    <img src={ASSETS.logo_header.src} alt="foxx.pet" />
  </a>
  <nav class="header__nav controls controls--center">
    {navLinks
      .filter((link) => link.includeInHeader)
      .map((link) => (
        <a
          class:list={[
            
            link.isActive && 'is-active',
            'button',
            
            'button--small',
            'button--plain',
            'button--round',
            
            
          ]}
          href={link.href}
          data-active={link.isActive ? 'true' : undefined}
          aria-current={link.isActive ? 'page' : undefined}
        >
          <div class:list={['header__nav-link', link.icon && 'header__nav-link--with-icon']}>
            {link.icon ? (
              <>
                <span class="header__nav-text">{link.label}</span>
                <span class:list={['header__nav-symbol', 'header__nav-symbol--icon']} aria-hidden="true">
                  <ICONS kind={link.icon} />
                </span>
              </>
            ) : (
              <>
                {link.emoji ? (
                  <span class:list={['header__nav-symbol', 'header__nav-symbol--emoji']} aria-hidden="true">
                    {link.emoji}
                  </span>
                ) : null}
                <span class="header__nav-text">{link.label}</span>
              </>
            )}
          </div>
        </a>
      ))}
  </nav>
  <div class="header__crumbs" aria-label="Breadcrumb">
    <ol>
      {breadcrumbs.map((crumb, index) => (
        <li>
          {crumb.isCurrent ? (
            <span class="is-current" aria-current="page">{crumb.label}</span>
          ) : (
            <a href={crumb.href}>{crumb.label}</a>
          )}
        </li>
      ))}
    </ol>

  </div>
  {hasActions ? (
    <div class="header__actions controls">
      <slot name="actions" />
    </div>
) : null}
</header>

<script>
  import { ResponsiveSiteHeader, observer } from '@Scripts/siteHeaderSticky.js';
  import { runOnReady } from '@Scripts/utils/_runOnReady.js';
  runOnReady(() => {
    const cleanup = ResponsiveSiteHeader();
    observer();
    if (typeof cleanup === 'function') {
      window.addEventListener('astro:before-swap', cleanup, { once: true });
    }
  });

</script>


