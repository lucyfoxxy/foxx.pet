---
const {
  count = 50,
  color = 'oklch(80% .15 300)',
  z = -1,
  tilt = -45,        // Grad
} = Astro.props;
---
<div class="stars" aria-hidden="true" style={`--c:${color}; --z:${z}; --tilt:${tilt}deg;`}>
  {Array.from({ length: count }).map(() => <div class="star" />)}
</div>

<style>
.stars{
  position:fixed; inset:-10% 0 0 0; width:100%; height:120%;
  transform: rotate(var(--tilt, -45deg));
  pointer-events:none; z-index:var(--z,-1);
  background: radial-gradient(ellipse at bottom,#0d1d31 0%,#0c0d13 100%);
}
.star{
  --tail: 6em; --h: 2px; --dur: 9s; --delay: 0s;
  position:absolute; top: var(--top, 50vh); left:0;
  width: var(--tail); height: var(--h);
  color: var(--c, #9cc0ff);
  background: linear-gradient(45deg,currentColor,transparent);
  border-radius:50%; filter: drop-shadow(0 0 6px currentColor);
  transform: translate3d(104em,0,0);
  animation: fall var(--dur) var(--delay) linear infinite, fade var(--dur) var(--delay) ease-out infinite;
}
.star::before,.star::after{
  content:''; position:absolute; top:0; left: calc((var(--tail)/6)/-2);
  width: calc(var(--tail)/6); height:100%;
  background: linear-gradient(45deg,transparent,currentColor,transparent);
  border-radius: inherit; animation: blink 2s linear infinite;
}
.star::before{ transform: rotate(45deg); }
.star::after{  transform: rotate(-45deg); }

@keyframes fall { to { transform: translate3d(-30em,0,0); } }
@keyframes fade { 0%,50%{opacity:1} 70%,80%{opacity:.4} 100%{opacity:0} }
@keyframes blink { 50% { opacity:.6 } }

@media (prefers-reduced-motion: reduce){ .star{ animation:none; } }
</style>

<script is:raw>
/* Zufallswerte inline per style setzen (ohne SCSS):
   Wir lassen Astro die Elemente rendern und vergeben danach Random-Props. */
</script>
