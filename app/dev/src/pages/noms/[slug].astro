---
import { View } from '@Frontend';
import { getPageContent } from '@Content/siteContent';

export const prerender = true;

export async function getStaticPaths() {
  const page = await getPageContent('noms');
  const categories = page.categories ?? [];

  return categories
    .map((category) => category.slug?.trim())
    .filter((slug): slug is string => Boolean(slug?.length))
    .map((slug) => ({
      params: { slug },
    }));
}

const { slug } = Astro.params;

if (!slug) {
  throw new Error('Missing blog category slug');
}
---
<View.Category slug={slug} />
