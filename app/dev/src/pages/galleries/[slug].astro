---
import { getEntry } from 'astro:content';
import Layout from '@Layout/Main.astro';
import GalleryDetailPage from '@Pages/Gallery/DetailPage.astro';

export async function getStaticPaths() {
  const catalog = (await getEntry('galleryCatalog', 'categories')).data;
  return catalog.categories
    .filter((c) => c.slug)
    .map((c) => ({
      params: { slug: c.slug! },
      props:  { title: c.title, description: c.description ?? '' },
    }));
}

const { slug }  = Astro.params;
const { title, description } = Astro.props as { title?: string; description?: string };
const meta = {
  title: title ?? 'Gallery',
  description: description ?? '',
};
---
<Layout title={meta.title} meta={meta}>
  <GalleryDetailPage albumSlug={slug} title={title ?? meta.title} description={description} />
</Layout>
