---
import Layout from '@Design/Layout.astro';
import GalleryDetailPage from '@Pages/Gallery/DetailPage.astro';
import { sitePages } from '@Content/sitePages';

export async function getStaticPaths() {
  const categories = sitePages.galleries.categories;
  return categories.map((category) => ({
    params: { slug: category.slug },
    props: {
      title: category.title,
      description: category.description ?? '',
    },
  }));
}

const { slug }  = Astro.params;
const { title, description } = Astro.props as { title?: string; description?: string };
const galleriesMeta = sitePages.galleries.meta;
const pageTitle = title ?? galleriesMeta.title;
const pageDescription = description && description.length > 0 ? description : galleriesMeta.description;
---
<Layout title={pageTitle} meta={{ description: pageDescription }}>
  <GalleryDetailPage albumSlug={slug} title={title} description={description} />
</Layout>
