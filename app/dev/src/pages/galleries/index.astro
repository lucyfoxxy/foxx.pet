---
import { getEntry } from 'astro:content';
import Layout from '@Layout/Main.astro';
import GalleryOverviewPage from '@Pages/Gallery/OverviewPage.astro';
import { getPageContent } from '@Content/siteContent';
export const prerender = true;

const content = await getPageContent('galleries');
const catalog = (await getEntry('galleryCatalog', 'categories')).data;
const categories = catalog.categories
  .filter((cat): cat is typeof cat & { slug: string } => Boolean(cat.slug))
  .map((cat) => ({
    slug: cat.slug,
    title: cat.title,
    description: cat.description ?? '',
  }));
const meta = { title: content.title, description: content.description };
const backHref = '/';
const backLabel = '‚Üê Back to Home';
---
<Layout title={content.title} meta={meta}>
  <Fragment slot="panel__bar--actions">
    <a class="button button--small" href={backHref}>{backLabel}</a>
  </Fragment>  
  <GalleryOverviewPage {categories} />
</Layout>
