<VirtualHost *:80>
  ServerName faelis.art
  RewriteEngine On
  RewriteRule ^ https://faelis.art%{REQUEST_URI} [R=301,L]
</VirtualHost>

<VirtualHost *:443>
  ServerName faelis.art
  DocumentRoot /var/www/faelis.art/public

  # immich_kiosk ReverseProxy 
  ProxyPreserveHost On
  ProxyRequests Off
 
  # CSP	
 Header set Content-Security-Policy "default-src 'self'; img-src 'self' https://i.faelis.art https://img.foxx.pet data: blob:; media-src 'self' https://i.faelis.art https://img.foxx.pet; connect-src 'self' https://i.faelis.art https://img.foxx.pet; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' data: https://fonts.gstatic.com; frame-src 'self'; script-src 'self'; object-src 'none'; base-uri 'self'; frame-ancestors 'none'"   

  <Directory /var/www/faelis.art/public>
    Options -Indexes
    AllowOverride All
    Require all granted
  </Directory>

  SSLEngine on
	SSLCertificateFile	/etc/letsencrypt/live/faelis.art/fullchain.pem
	SSLCertificateKeyFile /etc/letsencrypt/live/faelis.art/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
